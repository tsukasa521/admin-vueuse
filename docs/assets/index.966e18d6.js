import{t as S,a as s,r as O,h as A,i as R,u as m}from"./index.5771b930.js";function h(t,a,e=".",l){if(!f(a))return h(t,{},e,l);const o=Object.assign({},a);for(const n in t){if(n==="__proto__"||n==="constructor")continue;const r=t[n];r!=null&&(l&&l(o,n,r,e)||(Array.isArray(r)&&Array.isArray(o[n])?o[n]=[...r,...o[n]]:f(r)&&f(o[n])?o[n]=h(r,o[n],(e?`${e}.`:"")+n.toString(),l):o[n]=r))}return o}function f(t){if(t===null||typeof t!="object")return!1;const a=Object.getPrototypeOf(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function _(t){return(...a)=>a.reduce((e,l)=>h(e,l,"",t),{})}const y=_(),N={pageNum:1,pageSize:20},E={resultData:"list",total:"count"};function Q(t){if(!t.tableDataResolver)throw new Error("TableDataResolver is required.");const{tableDataResolver:a}=S(t),e=s(y(t.searchQuery,N)),l=s(t.isPagination==null?!0:t.isPagination),o=s(t.hasMounted==null?!0:t.hasMounted),n=s(t.shim||(u=>u)),r=s(y(t.responseProps,E)),g=s({defaultCurrent:e.value.pageNum,defaultPageSize:e.value.pageSize,total:0}),i=O({listLoading:!1,list:[],total:0}),c=()=>new Promise((u,v)=>{i.listLoading=!0;const j=[m(e)];m(a)(...j).then(p=>{const{data:d}=p;if(l.value){const{[r.value.resultData]:L,[r.value.total]:b}=d;i.list=n.value(L),i.total=b,g.value&&(g.value.total=b)}else i.list=n.value(d),i.total=i.list.length,g.value=void 0;u(d)}).catch(p=>{v(p)}).finally(()=>{i.listLoading=!1})}),P=({current:u,pageSize:v})=>{e.value.pageSize=v,e.value.pageNum=u,c()},C=u=>{e.value.pageSize=u,c()},D=u=>{e.value.pageNum=u,c()};o.value&&A(()=>{c()});const{list:w,total:z,listLoading:M}=S(i);return{list:w,total:z,listLoading:M,getList:c,handleCurrentPageChange:D,handlePageSizeChange:C,handlePageChange:P,searchQuery:e,pagination:g}}function q(){return{showSuccessMessage:(t="\u64CD\u4F5C\u6210\u529F",a,e)=>{console.log(t)},showWarningMessage:(t,a,e)=>{console.warn(t)},showErrorMessage:(t="\u64CD\u4F5C\u5931\u8D25",a,e)=>{console.error(t)}}}const x=["update:visible","cancel","resolve","open","closed"],T={source:Object};function V(t,a){const e=R({get(){return t.visible},set(o){a("update:visible",o)}}),l=s(!1);return{currentVisible:e,buttonLoading:l}}function W(){const t=s(!1),a=s(null);return{modalVisible:t,modalSource:a,openModal:e=>{t.value=!0,a.value=e}}}export{q as Q,x as U,V as W,W as k,Q as q,T as x};
