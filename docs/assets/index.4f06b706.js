import{g as h,h as s,r as L,i as z,u as y,j as A}from"./index.de3f9234.js";function p(t,n,e=".",l){if(!f(n))return p(t,{},e,l);const a=Object.assign({},n);for(const o in t){if(o==="__proto__"||o==="constructor")continue;const r=t[o];r!=null&&(l&&l(a,o,r,e)||(Array.isArray(r)&&Array.isArray(a[o])?a[o]=[...r,...a[o]]:f(r)&&f(a[o])?a[o]=p(r,a[o],(e?`${e}.`:"")+o.toString(),l):a[o]=r))}return a}function f(t){if(t===null||typeof t!="object")return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function R(t){return(...n)=>n.reduce((e,l)=>p(e,l,"",t),{})}const m=R(),_={pageNum:1,pageSize:20},F={resultData:"list",total:"count"};function T(t){if(!t.tableDataResolver)throw new Error("TableDataResolver is required.");const{tableDataResolver:n}=h(t),e=s(m(t.searchQuery,_)),l=s(t.isPagination==null?!0:t.isPagination),a=s(t.hasMounted==null?!0:t.hasMounted),o=s(t.shim||(i=>i)),r=s(m(t.responseProps,F)),c=s({defaultCurrent:e.value.pageNum,defaultPageSize:e.value.pageSize,total:0}),u=L({listLoading:!1,list:[],total:0}),g=()=>new Promise((i,w)=>{u.listLoading=!0;const M=[y(e)];y(n)(...M).then(d=>{const{data:v}=d;if(l.value){const{[r.value.resultData]:O,[r.value.total]:b}=v;u.list=o.value(O),u.total=b,c.value&&(c.value.total=b)}else u.list=o.value(v),u.total=u.list.length,c.value=void 0;i(v)}).catch(d=>{w(d)}).finally(()=>{u.listLoading=!1})}),S=i=>{e.value.pageSize=i,g()},C=i=>{e.value.pageNum=i,g()};a.value&&z(()=>{g()});const{list:D,total:P,listLoading:j}=h(u);return{list:D,total:P,listLoading:j,getList:g,handleCurrentPageChange:C,handlePageSizeChange:S,searchQuery:e,pagination:c}}function q(){return{showSuccessMessage:(t="\u64CD\u4F5C\u6210\u529F",n,e)=>{console.log(t)},showWarningMessage:(t,n,e)=>{console.warn(t)},showErrorMessage:(t="\u64CD\u4F5C\u5931\u8D25",n,e)=>{console.error(t)}}}const x=["update:visible","cancel","resolve","open","closed"],E={visible:{type:Boolean,default:!1,required:!0}},Q={source:Object};function V(t,n){const e=A({get(){return t.visible},set(a){n("update:visible",a)}}),l=s(!1);return{currentVisible:e,buttonLoading:l}}function W(){const t=s(!1),n=s(null);return{modalVisible:t,modalSource:n,openModal:e=>{t.value=!0,n.value=e}}}export{Q as $,x as I,T,E as U,W,q as j,V as x};
