import{defineComponent as b,reactive as y,ref as T,resolveComponent as m,openBlock as v,createElementBlock as x,createElementVNode as K,createVNode as n,unref as t,withCtx as r,createTextVNode as f}from"vue";import{q as P}from"./index.e16bec0c.js";import{_ as V}from"./index.091c0d95.js";import"tdesign-vue-next";const w=[{id:1,name:"\u5ED6\u6DB5\u884D",userAge:25},{id:2,name:"\u9093\u6BC5\u7136",userAge:25},{id:3,name:"\u8C22\u627F\u671B",userAge:25},{id:4,name:"\u80E1\u5609\u8363",userAge:25},{id:5,name:"\u80E1\u548C\u5E73",userAge:25},{id:6,name:"\u949F\u5F18\u548C",userAge:25},{id:7,name:"\u9AD8\u6CE2\u5149",userAge:25},{id:8,name:"\u6C5F\u627F\u5B89",userAge:25},{id:9,name:"\u9ECE\u627F\u6069",userAge:25},{id:10,name:"\u8D75\u6D69\u7136",userAge:25},{id:11,name:"\u6881\u82E5\u4E91",userAge:25},{id:12,name:"\u5468\u82B3\u6CFD",userAge:25},{id:13,name:"\u4E54\u6E05\u5609",userAge:25},{id:14,name:"\u8881\u53F8\u8FB0",userAge:25},{id:15,name:"\u77F3\u79C0\u5A9A",userAge:25},{id:16,name:"\u91D1\u60E0\u82B3",userAge:25},{id:17,name:"\u90B9\u6292\u6000",userAge:25},{id:18,name:"\u590F\u94C3\u8BED",userAge:25},{id:19,name:"\u9648\u6D25\u6587",userAge:25}],I=[{id:1,name:"\u5ED6\u6DB5\u884D",userAge:25},{id:2,name:"\u9093\u6BC5\u7136",userAge:25},{id:3,name:"\u8C22\u627F\u671B",userAge:25},{id:4,name:"\u80E1\u5609\u8363",userAge:25},{id:5,name:"\u80E1\u548C\u5E73",userAge:25}],L=e=>{console.log("query",e);const{pageNum:a,pageSize:i,name:u}=e;return new Promise((l,d)=>{let o=w;u&&(o=o.filter(p=>p.name==e.name));const c=(a-1)*i,g=c+i,_=o.slice(c,g);l({data:{list:_,count:o.length}})})},N=e=>(console.log("query",e),new Promise((a,i)=>{let u=I;e.name&&(u=u.filter(l=>l.name.includes(e.name))),a({data:u})})),k=b({__name:"Table",setup(e){const a=y({tableDataResolver:L,searchQuery:{pageSize:10,name:""},shim:A=>A.map(s=>({id:s.id,name:s.name,age:s.userAge}))}),{getList:i,list:u,listLoading:l,searchQuery:d,pagination:o,handlePageChange:c}=P(a),g=T([{colKey:"id",title:"ID"},{colKey:"name",title:"\u59D3\u540D"},{colKey:"age",title:"\u5E74\u9F84"}]),_=()=>{i()},p=()=>{a.tableDataResolver=N};return(A,s)=>{const E=m("t-input"),C=m("t-form-item"),D=m("t-button"),B=m("t-form"),h=m("t-table");return v(),x("section",null,[K("div",null,[n(B,{data:t(d),layout:"inline","label-width":"0",onSubmit:_},{default:r(()=>[n(C,null,{default:r(()=>[n(E,{modelValue:t(d).name,"onUpdate:modelValue":s[0]||(s[0]=F=>t(d).name=F),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"},null,8,["modelValue"])]),_:1}),n(C,null,{default:r(()=>[n(D,{theme:"primary",type:"submit"},{default:r(()=>[f("\u641C\u7D22")]),_:1}),n(D,{theme:"primary",onClick:p},{default:r(()=>[f("\u66F4\u6539")]),_:1})]),_:1})]),_:1},8,["data"])]),n(h,{rowKey:"id",data:t(u),columns:g.value,size:"small",loading:t(l),pagination:t(o),onPageChange:t(c),"cell-empty-content":"--"},null,8,["data","columns","loading","pagination","onPageChange"])])}}});const O=V(k,[["__scopeId","data-v-d7c9e4c6"]]);export{O as default};
